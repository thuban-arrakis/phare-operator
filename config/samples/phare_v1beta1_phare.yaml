apiVersion: phare.localcorp.internal/v1beta1
kind: Phare
metadata:
  labels:
    app.kubernetes.io/name: phare
    app.kubernetes.io/created-by: operator
  name: phare-sample
spec:
  microservice:
    image:
      repository: nginx
      tag: 1.19.6
    imagePullPolicy: IfNotPresent
    kind: Deployment # <-- if you want to use Deployment, change to Deployment
    replicaCount: 1
    command: ["nginx", "-g", "daemon off;"]
    env:
      - name: PHARE_CONFIG
        value: /etc/phare/config.js
  service:
    ports:
      - name: http
        port: 80
        targetPort: 80
  toolchain:
    config:
      key: new-value
      config.js: |
        module.exports = {
          key: 'value'
        }
